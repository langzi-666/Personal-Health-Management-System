# ä¸ªäººå¥åº·ç®¡ç†ç³»ç»Ÿ - éƒ¨ç½²è¯´æ˜

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
2. [æ•°æ®åº“éƒ¨ç½²](#æ•°æ®åº“éƒ¨ç½²)
3. [åç«¯éƒ¨ç½²](#åç«¯éƒ¨ç½²)
4. [å‰ç«¯éƒ¨ç½²](#å‰ç«¯éƒ¨ç½²)
5. [ç”Ÿäº§ç¯å¢ƒé…ç½®](#ç”Ÿäº§ç¯å¢ƒé…ç½®)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ”§ ç¯å¢ƒè¦æ±‚

### å¿…éœ€è½¯ä»¶

| è½¯ä»¶ | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|---------|------|
| Java | JDK 11+ | åç«¯è¿è¡Œç¯å¢ƒ |
| Node.js | 16+ | å‰ç«¯è¿è¡Œç¯å¢ƒ |
| MySQL | 8.0+ | æ•°æ®åº“ |
| Maven | 3.6+ | Javaé¡¹ç›®æ„å»ºå·¥å…·ï¼ˆå¯é€‰ï¼ŒIDEè‡ªå¸¦ï¼‰ |
| Git | ä»»æ„ç‰ˆæœ¬ | ä»£ç ç‰ˆæœ¬æ§åˆ¶ï¼ˆå¯é€‰ï¼‰ |

### å¼€å‘å·¥å…·æ¨è

- **åç«¯å¼€å‘**ï¼šIntelliJ IDEA / Eclipse
- **å‰ç«¯å¼€å‘**ï¼šVS Code / WebStorm
- **æ•°æ®åº“ç®¡ç†**ï¼šNavicat / DBeaver / MySQL Workbench

---

## ğŸ—„ï¸ æ•°æ®åº“éƒ¨ç½²

### Step 1: åˆ›å»ºæ•°æ®åº“

```sql
-- ç™»å½•MySQL
mysql -u root -p

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE health_management_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ä½¿ç”¨æ•°æ®åº“
USE health_management_system;
```

### Step 2: æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬

1. æ‰“å¼€ `MySQLæ•°æ®åº“è®¾è®¡.md` æ–‡ä»¶
2. å¤åˆ¶æ‰€æœ‰ SQL è¯­å¥
3. åœ¨ MySQL å®¢æˆ·ç«¯ä¸­æ‰§è¡Œ

æˆ–è€…ç›´æ¥æ‰§è¡Œ `backend/src/main/resources/sql/init.sql`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰

### Step 3: éªŒè¯è¡¨åˆ›å»º

```sql
-- æŸ¥çœ‹æ‰€æœ‰è¡¨
SHOW TABLES;

-- åº”è¯¥çœ‹åˆ°ä»¥ä¸‹11ä¸ªè¡¨ï¼š
-- users
-- weight_records
-- blood_pressure_records
-- blood_glucose_records
-- exercise_records
-- sleep_records
-- diet_records
-- mental_health_records
-- notifications
-- reminder_rules
-- alert_rules
```

### Step 4: é…ç½®æ•°æ®åº“è¿æ¥

ç¼–è¾‘ `backend/src/main/resources/application.yml`ï¼š

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/health_management_system?useUnicode=true&characterEncoding=utf8&serverTimezone=UTC&allowPublicKeyRetrieval=true&useSSL=false
    username: root
    password: "123456"  # ä¿®æ”¹ä¸ºä½ çš„MySQLå¯†ç 
```

---

## ğŸ”§ åç«¯éƒ¨ç½²

### å¼€å‘ç¯å¢ƒéƒ¨ç½²

#### æ–¹å¼1ï¼šä½¿ç”¨IDEè¿è¡Œ

1. **æ‰“å¼€é¡¹ç›®**
   - ä½¿ç”¨ IntelliJ IDEA æ‰“å¼€ `backend` ç›®å½•
   - ç­‰å¾… Maven ä¾èµ–ä¸‹è½½å®Œæˆ

2. **é…ç½®è¿è¡Œ**
   - æ‰¾åˆ° `HealthManagementApplication.java`
   - å³é”® â†’ Run 'HealthManagementApplication'
   - æˆ–ä½¿ç”¨å¿«æ·é”® `Shift + F10`

3. **éªŒè¯å¯åŠ¨**
   - æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œåº”è¯¥çœ‹åˆ°ï¼š
     ```
     Started HealthManagementApplication in X.XXX seconds
     ```
   - è®¿é—® `http://localhost:8080/api/health` åº”è¯¥è¿”å›å¥åº·æ£€æŸ¥ä¿¡æ¯

#### æ–¹å¼2ï¼šä½¿ç”¨Mavenå‘½ä»¤

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# ç¼–è¯‘é¡¹ç›®
mvn clean compile

# è¿è¡Œé¡¹ç›®
mvn spring-boot:run
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### æ–¹å¼1ï¼šæ‰“åŒ…ä¸ºJARæ–‡ä»¶

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# æ‰“åŒ…ï¼ˆè·³è¿‡æµ‹è¯•ï¼‰
mvn clean package -DskipTests

# ç”Ÿæˆçš„JARæ–‡ä»¶ä½ç½®
# backend/target/health-management-system-1.0.0.jar

# è¿è¡ŒJARæ–‡ä»¶
java -jar target/health-management-system-1.0.0.jar
```

#### æ–¹å¼2ï¼šä½¿ç”¨Dockerï¼ˆå¯é€‰ï¼‰

```dockerfile
# Dockerfileï¼ˆéœ€è¦åˆ›å»ºï¼‰
FROM openjdk:11-jre-slim
WORKDIR /app
COPY target/health-management-system-1.0.0.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

```bash
# æ„å»ºé•œåƒ
docker build -t health-management-system:1.0.0 .

# è¿è¡Œå®¹å™¨
docker run -d -p 8080:8080 \
  -e SPRING_DATASOURCE_URL=jdbc:mysql://host.docker.internal:3306/health_management_system \
  -e SPRING_DATASOURCE_USERNAME=root \
  -e SPRING_DATASOURCE_PASSWORD=123456 \
  health-management-system:1.0.0
```

### åç«¯é…ç½®è¯´æ˜

#### application.yml å…³é”®é…ç½®

```yaml
server:
  port: 8080  # æœåŠ¡ç«¯å£

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/health_management_system
    username: root
    password: "123456"

jwt:
  secret: YourSecretKeyHere  # ç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹ä¸ºå¼ºå¯†é’¥
  expiration: 86400000  # Tokenæœ‰æ•ˆæœŸï¼ˆæ¯«ç§’ï¼‰
```

---

## ğŸ¨ å‰ç«¯éƒ¨ç½²

### å¼€å‘ç¯å¢ƒéƒ¨ç½²

#### Step 1: å®‰è£…ä¾èµ–

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
npm install
# æˆ–ä½¿ç”¨ yarn
yarn install
```

#### Step 2: å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
# æˆ–
yarn dev

# æœåŠ¡å™¨ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
# è®¿é—®åœ°å€ï¼šhttp://localhost:5173
```

#### Step 3: é…ç½®APIåœ°å€

ç¼–è¾‘ `frontend/src/api/request.js`ï¼š

```javascript
const instance = axios.create({
  baseURL: 'http://localhost:8080/api',  // ä¿®æ”¹ä¸ºåç«¯åœ°å€
  timeout: 30000,
})
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### Step 1: æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
# æˆ–
yarn build

# æ„å»ºäº§ç‰©åœ¨ dist/ ç›®å½•
```

#### Step 2: éƒ¨ç½²åˆ°WebæœåŠ¡å™¨

**æ–¹å¼1ï¼šä½¿ç”¨Nginx**

```nginx
# nginx.conf é…ç½®ç¤ºä¾‹
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/frontend/dist;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

**æ–¹å¼2ï¼šä½¿ç”¨Apache**

```apache
# .htaccess é…ç½®
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>
```

**æ–¹å¼3ï¼šä½¿ç”¨Node.jsæœåŠ¡å™¨ï¼ˆå¦‚Expressï¼‰**

```javascript
// server.js
const express = require('express');
const path = require('path');
const app = express();

app.use(express.static(path.join(__dirname, 'dist')));

app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, 'dist', 'index.html'));
});

app.listen(3000, () => {
  console.log('Server running on http://localhost:3000');
});
```

---

## ğŸŒ ç”Ÿäº§ç¯å¢ƒé…ç½®

### å®‰å…¨é…ç½®

#### 1. ä¿®æ”¹JWTå¯†é’¥

```yaml
# application.yml
jwt:
  secret: YourVeryLongAndSecureSecretKeyForProductionEnvironment2025  # è‡³å°‘64å­—ç¬¦
  expiration: 86400000
```

#### 2. é…ç½®HTTPS

- ä½¿ç”¨Nginxåå‘ä»£ç†é…ç½®SSLè¯ä¹¦
- æˆ–ä½¿ç”¨Spring Bootå†…ç½®HTTPSé…ç½®

#### 3. æ•°æ®åº“å®‰å…¨

- ä½¿ç”¨å¼ºå¯†ç 
- é™åˆ¶æ•°æ®åº“è®¿é—®IP
- å®šæœŸå¤‡ä»½æ•°æ®åº“

#### 4. CORSé…ç½®

ç”Ÿäº§ç¯å¢ƒåº”é™åˆ¶CORSæ¥æºï¼š

```java
// CorsConfig.java
.allowedOriginPatterns("https://your-domain.com", "https://www.your-domain.com")
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. æ•°æ®åº“è¿æ¥æ± 

```yaml
spring:
  datasource:
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
```

#### 2. ç¼“å­˜é…ç½®

- ä½¿ç”¨Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- é…ç½®Spring Cache

#### 3. æ–‡ä»¶ä¸Šä¼ é™åˆ¶

```yaml
spring:
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 10MB
```

---

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### æ—¥å¿—é…ç½®

æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š`backend/logs/application.log`

```yaml
# application.yml
logging:
  level:
    root: INFO
    com.health: DEBUG
  file:
    name: logs/application.log
    max-size: 10MB
    max-history: 30
```

### å¥åº·æ£€æŸ¥

- åç«¯å¥åº·æ£€æŸ¥ï¼š`http://localhost:8080/api/health`
- APIæ–‡æ¡£ï¼š`http://localhost:8080/doc.html`ï¼ˆKnife4jï¼‰

---

## â“ å¸¸è§é—®é¢˜

### Q1: åç«¯å¯åŠ¨å¤±è´¥ï¼Œæç¤ºæ•°æ®åº“è¿æ¥é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
2. éªŒè¯æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ˆç”¨æˆ·åã€å¯†ç ã€æ•°æ®åº“åï¼‰
3. ç¡®è®¤æ•°æ®åº“å·²åˆ›å»º
4. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### Q2: å‰ç«¯æ— æ³•è¿æ¥åç«¯API

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤åç«¯æœåŠ¡å·²å¯åŠ¨ï¼ˆè®¿é—® `http://localhost:8080/api/health`ï¼‰
2. æ£€æŸ¥ `frontend/src/api/request.js` ä¸­çš„ `baseURL` é…ç½®
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„CORSé”™è¯¯
4. ç¡®è®¤åç«¯CORSé…ç½®æ­£ç¡®

### Q3: æ–‡ä»¶ä¸Šä¼ å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ `uploads` ç›®å½•æ˜¯å¦å­˜åœ¨ä¸”æœ‰å†™æƒé™
2. ç¡®è®¤æ–‡ä»¶å¤§å°ä¸è¶…è¿‡5MB
3. æ£€æŸ¥æ–‡ä»¶ç±»å‹æ˜¯å¦ä¸ºå…è®¸çš„å›¾ç‰‡æ ¼å¼
4. æŸ¥çœ‹åç«¯æ—¥å¿—é”™è¯¯ä¿¡æ¯

### Q4: Tokenè¿‡æœŸé—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥JWTé…ç½®çš„è¿‡æœŸæ—¶é—´
2. å‰ç«¯åº”è‡ªåŠ¨å¤„ç†401é”™è¯¯å¹¶è·³è½¬ç™»å½•
3. ç”Ÿäº§ç¯å¢ƒå»ºè®®è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´ï¼ˆå¦‚24å°æ—¶ï¼‰

### Q5: ç«¯å£è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆï¼š**

**åç«¯ç«¯å£8080è¢«å ç”¨ï¼š**
```bash
# Windows
netstat -ano | findstr :8080
taskkill /PID <PID> /F

# Linux/Mac
lsof -i :8080
kill -9 <PID>
```

**å‰ç«¯ç«¯å£5173è¢«å ç”¨ï¼š**
```bash
# ä¿®æ”¹ vite.config.js
server: {
  port: 5174  // æ”¹ä¸ºå…¶ä»–ç«¯å£
}
```

---

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### å¼€å‘ç¯å¢ƒ

- [ ] MySQLå·²å®‰è£…å¹¶å¯åŠ¨
- [ ] æ•°æ®åº“å·²åˆ›å»ºå¹¶åˆå§‹åŒ–
- [ ] Java 11+ å·²å®‰è£…
- [ ] Node.js 16+ å·²å®‰è£…
- [ ] åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] å‰ç«¯å¼€å‘æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
- [ ] APIè¿æ¥æ­£å¸¸
- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸

### ç”Ÿäº§ç¯å¢ƒ

- [ ] æ•°æ®åº“å·²å¤‡ä»½
- [ ] JWTå¯†é’¥å·²ä¿®æ”¹
- [ ] æ•°æ®åº“å¯†ç å·²ä¿®æ”¹
- [ ] CORSé…ç½®å·²é™åˆ¶æ¥æº
- [ ] HTTPSå·²é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æ–‡ä»¶ä¸Šä¼ ç›®å½•æƒé™å·²è®¾ç½®
- [ ] æ—¥å¿—é…ç½®å·²ä¼˜åŒ–
- [ ] æ€§èƒ½ç›‘æ§å·²é…ç½®ï¼ˆå¯é€‰ï¼‰

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®è¯´æ˜.md](./é¡¹ç›®è¯´æ˜.md)
- [æŠ€æœ¯æ¶æ„æ–‡æ¡£.md](./æŠ€æœ¯æ¶æ„æ–‡æ¡£.md)
- [MySQLæ•°æ®åº“è®¾è®¡.md](./MySQLæ•°æ®åº“è®¾è®¡.md)
- [README.md](./README.md)

---

**æœ€åæ›´æ–°**ï¼š2024å¹´11æœˆ  
**æ–‡æ¡£ç‰ˆæœ¬**ï¼š1.0

