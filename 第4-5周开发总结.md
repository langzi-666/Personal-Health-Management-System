# ç¬¬4-5å‘¨å¼€å‘æ€»ç»“

## ğŸ“Œ å®Œæˆæ—¶é—´
- **ç¬¬å››å‘¨**: å¥åº·æ•°æ®è®°å½• - å…¶ä»–æŒ‡æ ‡ï¼ˆè¡€ç³–ã€è¿åŠ¨ã€ç¡çœ ã€é¥®é£Ÿã€å¿ƒç†å¥åº·ï¼‰
- **ç¬¬äº”å‘¨**: ä»ªè¡¨æ¿ä¸æ•°æ®æ¦‚è§ˆ

## ğŸ¯ ç¬¬å››å‘¨å®Œæˆå†…å®¹

### åç«¯æ¨¡å—ï¼ˆ15ä¸ªæ–‡ä»¶ï¼‰

#### 1. å®ä½“ç±»ï¼ˆ5ä¸ªï¼‰
- **BloodGlucose.java** - è¡€ç³–å®ä½“ï¼ˆ60è¡Œï¼‰
  - å­—æ®µï¼šglucoseValue(mmol/L), measurementType(ç©ºè…¹/é¥­å/ç¡å‰), recordDate, recordTime
  
- **Exercise.java** - è¿åŠ¨å®ä½“ï¼ˆ71è¡Œï¼‰
  - å­—æ®µï¼šexerciseType, duration(åˆ†é’Ÿ), intensity(ä½/ä¸­/é«˜), caloriesBurned(kcal), recordDate/Time
  
- **Sleep.java** - ç¡çœ å®ä½“ï¼ˆ65è¡Œï¼‰
  - å­—æ®µï¼šbedTime, wakeTime, sleepDuration(å°æ—¶), sleepQuality(1-10), recordDate
  
- **Diet.java** - é¥®é£Ÿå®ä½“ï¼ˆ86è¡Œï¼‰
  - å­—æ®µï¼šfoodName, category(æ—©/åˆ/æ™š/é›¶é£Ÿ), quantity, calories, protein, fat, carbohydrates
  
- **MentalHealth.java** - å¿ƒç†å¥åº·å®ä½“ï¼ˆ70è¡Œï¼‰
  - å­—æ®µï¼šmoodScore(1-10), stressLevel(ä½/ä¸­/é«˜), anxietyLevel(1-10), mentalsState, recordDate/Time

#### 2. Mapperæ¥å£ï¼ˆ5ä¸ªï¼‰
- BloodGlucoseMapper.java
- ExerciseMapper.java
- SleepMapper.java
- DietMapper.java
- MentalHealthMapper.java

æ¯ä¸ªéƒ½ç»§æ‰¿BaseMapperå¹¶åŒ…å«ï¼š
```java
Page<T> selectByUserIdAndDateRange(Page<T> page, Long userId, Date startDate, Date endDate)
```

#### 3. Serviceç±»ï¼ˆ5ä¸ªï¼‰
- **BloodGlucoseService.java** - è¡€ç³–ä¸šåŠ¡é€»è¾‘
- **ExerciseService.java** - è¿åŠ¨ä¸šåŠ¡é€»è¾‘
- **SleepService.java** - ç¡çœ ä¸šåŠ¡é€»è¾‘
- **DietService.java** - é¥®é£Ÿä¸šåŠ¡é€»è¾‘
- **MentalHealthService.java** - å¿ƒç†å¥åº·ä¸šåŠ¡é€»è¾‘

æ ¸å¿ƒæ–¹æ³•ï¼š
- addRecord(T record) - æ·»åŠ è®°å½•ï¼Œè‡ªåŠ¨è®¾ç½®æ—¶é—´æˆ³
- getRecords(Long userId, Integer pageNum, Integer pageSize, Date startDate, Date endDate) - åˆ†é¡µæŸ¥è¯¢
- updateRecord(Long id, T record) - æ›´æ–°è®°å½•
- deleteRecord(Long id) - åˆ é™¤è®°å½•

#### 4. Controllerç±»ï¼ˆ5ä¸ªï¼‰
- **BloodGlucoseController.java** - `/api/health/blood-glucose`
- **ExerciseController.java** - `/api/health/exercise`
- **SleepController.java** - `/api/health/sleep`
- **DietController.java** - `/api/health/diet`
- **MentalHealthController.java** - `/api/health/mental-health`

æ¯ä¸ªéƒ½æä¾›4ä¸ªç«¯ç‚¹ï¼šPOSTã€GET(list)ã€PUTã€DELETE

### å‰ç«¯æ¨¡å—ï¼ˆ6ä¸ªæ–‡ä»¶ï¼‰

#### 1. APIæ¨¡å—
- **health.js** - æ›´æ–°ä¸º198è¡Œï¼ŒåŒ…å«æ‰€æœ‰å¥åº·æ•°æ®APIæ–¹æ³•
  - ä½“é‡ã€è¡€å‹ã€è¡€ç³–ã€è¿åŠ¨ã€ç¡çœ ã€é¥®é£Ÿã€å¿ƒç†å¥åº·ï¼Œæ¯ä¸ª5ä¸ªæ–¹æ³•

#### 2. é¡µé¢ç»„ä»¶ï¼ˆ5ä¸ªï¼‰
- **GlucoseRecord.vue** - è¡€ç³–è®°å½•é¡µé¢ï¼ˆ222è¡Œï¼‰
  - è¡¨å•ï¼šè¡€ç³–å€¼ã€æµ‹é‡ç±»å‹(ä¸‹æ‹‰)ã€æ—¥æœŸã€æ—¶é—´ã€å¤‡æ³¨
  - åˆ—è¡¨ï¼šæ˜¾ç¤ºè¡€ç³–å€¼ã€æµ‹é‡ç±»å‹ã€å¤‡æ³¨
  - åŠŸèƒ½ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€åˆ†é¡µã€æ—¥æœŸè¿‡æ»¤

- **ExerciseRecord.vue** - è¿åŠ¨è®°å½•é¡µé¢ï¼ˆ249è¡Œï¼‰
  - è¡¨å•ï¼šè¿åŠ¨ç±»å‹(ä¸‹æ‹‰)ã€æ—¶é•¿(æ•°å­—)ã€å¼ºåº¦ã€å¡è·¯é‡Œã€æ—¥æœŸã€æ—¶é—´
  - åˆ—è¡¨ï¼šæ˜¾ç¤ºè¿åŠ¨ä¿¡æ¯ã€æ—¶é•¿ã€å¼ºåº¦ã€å¡è·¯é‡Œ
  - åŠŸèƒ½ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€åˆ†é¡µã€æ—¥æœŸè¿‡æ»¤

- **SleepRecord.vue** - ç¡çœ è®°å½•é¡µé¢ï¼ˆ226è¡Œï¼‰
  - è¡¨å•ï¼šå…¥ç¡æ—¶é—´ã€èµ·åºŠæ—¶é—´ã€ç¡çœ æ—¶é•¿(æ•°å­—)ã€ç¡çœ è´¨é‡(æ»‘å—1-10)ã€æ—¥æœŸ
  - åˆ—è¡¨ï¼šæ˜¾ç¤ºæ—¥æœŸã€æ—¶é—´ã€æ—¶é•¿ã€è¯„åˆ†(æ˜Ÿçº§æ˜¾ç¤º)
  - åŠŸèƒ½ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€åˆ†é¡µã€æ—¥æœŸè¿‡æ»¤

- **DietRecord.vue** - é¥®é£Ÿè®°å½•é¡µé¢ï¼ˆ256è¡Œï¼‰
  - è¡¨å•ï¼šé£Ÿç‰©åç§°ã€åˆ†ç±»ã€ä»½é‡ã€å¡è·¯é‡Œã€è›‹ç™½è´¨ã€è„‚è‚ªã€ç¢³æ°´ã€æ—¥æœŸã€æ—¶é—´
  - åˆ—è¡¨ï¼šæ˜¾ç¤ºé£Ÿç‰©ã€åˆ†ç±»ã€ä»½é‡ã€è¥å…»ä¿¡æ¯
  - åŠŸèƒ½ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€åˆ†é¡µã€æ—¥æœŸè¿‡æ»¤

- **MentalHealthRecord.vue** - å¿ƒç†å¥åº·é¡µé¢ï¼ˆ262è¡Œï¼‰
  - è¡¨å•ï¼šå¿ƒæƒ…è¯„åˆ†(æ»‘å—)ã€å‹åŠ›ç­‰çº§ã€ç„¦è™‘ç¨‹åº¦ã€å¿ƒç†çŠ¶æ€(ä¸‹æ‹‰)ã€æ—¥æœŸã€æ—¶é—´ã€å¤‡æ³¨
  - åˆ—è¡¨ï¼šæ˜¾ç¤ºæ—¥æœŸã€å¿ƒæƒ…è¯„åˆ†(æ˜Ÿçº§)ã€å‹åŠ›ç­‰çº§(å½©è‰²æ ‡ç­¾)ã€å¿ƒç†çŠ¶æ€ã€å¤‡æ³¨
  - åŠŸèƒ½ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€åˆ†é¡µã€æ—¥æœŸè¿‡æ»¤

### è·¯ç”±æ›´æ–°
- router/index.js æ–°å¢5ä¸ªå­è·¯ç”±ï¼š
  - `/layout/glucose-record`
  - `/layout/exercise-record`
  - `/layout/sleep-record`
  - `/layout/diet-record`
  - `/layout/mental-health-record`

### èœå•æ›´æ–°
- Layout.vue èœå•å¢åŠ 5ä¸ªé“¾æ¥ï¼Œå¯ç”¨ä¹‹å‰ç¦ç”¨çš„åŠŸèƒ½

---

## ğŸ¯ ç¬¬äº”å‘¨å®Œæˆå†…å®¹

### åç«¯æ¨¡å—ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰

#### 1. åˆ†ææœåŠ¡ 
- **AnalysisService.java** - æ•°æ®ç»Ÿè®¡å’Œåˆ†ææœåŠ¡
  - `getLatestData(Long userId)` - è·å–æœ€æ–°çš„ä½“é‡ã€è¡€å‹ã€è¡€ç³–æ•°æ®
  - `getTodaySummary(Long userId)` - è·å–ä»Šæ—¥ç»Ÿè®¡ï¼š
    - ä»Šæ—¥æ‘„å…¥å¡è·¯é‡Œ (é¥®é£Ÿ)
    - ä»Šæ—¥è¿åŠ¨å¡è·¯é‡Œ
    - ä»Šæ—¥ç¡çœ æ—¶é•¿
  - `getWeeklySummary(Long userId)` - è·å–å‘¨ç»Ÿè®¡ï¼š
    - å‘¨è¿åŠ¨æ€»å¡è·¯é‡Œ
    - å‘¨å¹³å‡ç¡çœ æ—¶é•¿
  - `getMonthlySummary(Long userId)` - è·å–æœˆç»Ÿè®¡ï¼š
    - ä½“é‡å˜åŒ–ï¼ˆèµ·å§‹-ç»“æŸï¼‰
    - å¹³å‡è¡€å‹

#### 2. åˆ†ææ§åˆ¶å™¨
- **AnalysisController.java** - æ•°æ®åˆ†æAPIç«¯ç‚¹ï¼ˆ4ä¸ªï¼‰
  - `GET /api/analysis/latest` - è·å–æœ€æ–°æ•°æ®
  - `GET /api/analysis/today-summary` - è·å–ä»Šæ—¥ç»Ÿè®¡
  - `GET /api/analysis/weekly-summary` - è·å–å‘¨ç»Ÿè®¡
  - `GET /api/analysis/monthly-summary` - è·å–æœˆç»Ÿè®¡

### å‰ç«¯æ¨¡å—ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰

#### 1. APIæ¨¡å—
- **analysis.js** - åˆ†ææ•°æ®APIï¼ˆ4ä¸ªå‡½æ•°ï¼‰
  - getLatestData(userId)
  - getTodaySummary(userId)
  - getWeeklySummary(userId)
  - getMonthlySummary(userId)

#### 2. ä»ªè¡¨æ¿é¡µé¢
- **Dashboard.vue** - é¦–é¡µä»ªè¡¨æ¿ï¼ˆ367è¡Œï¼‰
  
  **å¸ƒå±€ç»“æ„**ï¼š
  - å¿«æ·å¡ç‰‡åŒºï¼ˆ4å¡ï¼‰ï¼š
    - ä»Šæ—¥æ‘„å…¥å¡è·¯é‡Œ
    - ä»Šæ—¥è¿åŠ¨å¡è·¯é‡Œ
    - ç¡çœ æ—¶é•¿
    - ä»Šæ—¥æ­¥æ•°ï¼ˆé¢„ç•™ï¼‰
  
  - æ•°æ®æ¦‚è§ˆåŒºï¼ˆ3å¡ï¼‰ï¼š
    - æœ€æ–°ä½“é‡ï¼ˆå«ä½“è„‚ç‡ã€è®°å½•æ—¥æœŸï¼‰
    - æœ€æ–°è¡€å‹ï¼ˆå«çŠ¶æ€æ ‡ç­¾ã€è„‰æï¼‰
    - æœ€æ–°è¡€ç³–ï¼ˆå«æµ‹é‡ç±»å‹ã€è®°å½•æ—¶é—´ï¼‰
  
  - ç»Ÿè®¡ä¿¡æ¯åŒºï¼š
    - å‘¨ç»Ÿè®¡ï¼šè¿åŠ¨å¡è·¯é‡Œã€å¹³å‡ç¡çœ 
    - æœˆç»Ÿè®¡ï¼šä½“é‡å˜åŒ–ã€å¹³å‡è¡€å‹
  
  - å¿«é€Ÿæ“ä½œåŒºï¼ˆ6æŒ‰é’®ï¼‰ï¼š
    - å¿«é€Ÿè·³è½¬åˆ°å„æ•°æ®è®°å½•é¡µé¢

### è·¯ç”±æ›´æ–°
- router/index.js æ›´æ–°dashboardè·¯ç”±æŒ‡å‘æ–°çš„Dashboard.vue

---

## ğŸ“Š æŠ€æœ¯äº®ç‚¹

### åç«¯è®¾è®¡
1. **ç»Ÿä¸€çš„Serviceæ¨¡å¼** - æ‰€æœ‰å¥åº·æ•°æ®Serviceé‡‡ç”¨ç›¸åŒçš„4ä¸ªæ ¸å¿ƒæ–¹æ³•
2. **çµæ´»çš„æŸ¥è¯¢** - æ”¯æŒæ—¥æœŸèŒƒå›´ã€åˆ†é¡µã€ç”¨æˆ·éš”ç¦»
3. **æ•°æ®ç»Ÿè®¡** - AnalysisServiceä½¿ç”¨MyBatis Plusçš„QueryWrapperè¿›è¡Œå¤æ‚æŸ¥è¯¢
4. **è‡ªåŠ¨æ—¶é—´æˆ³** - Serviceå±‚è‡ªåŠ¨ç®¡ç†createTimeå’ŒupdateTime

### å‰ç«¯è®¾è®¡
1. **é¡µé¢ç»„ä»¶å¤ç”¨æ€§** - 5ä¸ªè®°å½•é¡µé¢é‡‡ç”¨ç›¸ä¼¼çš„ç»“æ„å’Œé€»è¾‘
2. **å“åº”å¼è®¾è®¡** - ä½¿ç”¨Gridå’ŒFlexå®ç°è‡ªé€‚åº”å¸ƒå±€
3. **æ•°æ®ç»‘å®š** - ä½¿ç”¨computedå’Œwatchå®ç°è‡ªåŠ¨åˆ·æ–°
4. **ç”¨æˆ·å‹å¥½** - å½©è‰²æ ‡ç­¾ã€æ˜Ÿçº§è¯„åˆ†ã€æ»‘å—ç­‰å¤šç§äº¤äº’æ–¹å¼
5. **ä»ªè¡¨æ¿å¯è§†åŒ–** - å¡ç‰‡å¼å¸ƒå±€æ¸…æ™°å±•ç¤ºå¤šç»´åº¦æ•°æ®

---

## âœ… æµ‹è¯•æ¸…å•

### åç«¯åŠŸèƒ½æµ‹è¯•
- [ ] è¡€ç³–ã€è¿åŠ¨ã€ç¡çœ ã€é¥®é£Ÿã€å¿ƒç†å¥åº· - CRUDæ“ä½œ
- [ ] åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½
- [ ] æ—¥æœŸèŒƒå›´è¿‡æ»¤
- [ ] åˆ†ææ¥å£è¿”å›æ•°æ®å‡†ç¡®æ€§

### å‰ç«¯åŠŸèƒ½æµ‹è¯•
- [ ] 5ä¸ªè®°å½•é¡µé¢ï¼šè¡¨å•æäº¤ã€åˆ—è¡¨åŠ è½½ã€ç¼–è¾‘ã€åˆ é™¤
- [ ] æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨
- [ ] åˆ†é¡µåˆ‡æ¢
- [ ] ä»ªè¡¨æ¿æ•°æ®åŠ è½½å’Œå±•ç¤º
- [ ] å¿«é€Ÿæ“ä½œæŒ‰é’®è·³è½¬

### é›†æˆæµ‹è¯•
- [ ] å‰åç«¯APIè”é€š
- [ ] æ•°æ®æŒä¹…åŒ–
- [ ] ç”¨æˆ·æ•°æ®éš”ç¦»

---

## ğŸ“ æ–°å¢æ–‡ä»¶åˆ—è¡¨

### åç«¯ï¼ˆ15ä¸ªï¼‰
```
backend/src/main/java/com/health/
â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ BloodGlucose.java
â”‚   â”œâ”€â”€ Exercise.java
â”‚   â”œâ”€â”€ Sleep.java
â”‚   â”œâ”€â”€ Diet.java
â”‚   â””â”€â”€ MentalHealth.java
â”œâ”€â”€ mapper/
â”‚   â”œâ”€â”€ BloodGlucoseMapper.java
â”‚   â”œâ”€â”€ ExerciseMapper.java
â”‚   â”œâ”€â”€ SleepMapper.java
â”‚   â”œâ”€â”€ DietMapper.java
â”‚   â””â”€â”€ MentalHealthMapper.java
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ BloodGlucoseService.java
â”‚   â”œâ”€â”€ ExerciseService.java
â”‚   â”œâ”€â”€ SleepService.java
â”‚   â”œâ”€â”€ DietService.java
â”‚   â”œâ”€â”€ MentalHealthService.java
â”‚   â””â”€â”€ AnalysisService.java
â””â”€â”€ controller/
    â”œâ”€â”€ BloodGlucoseController.java
    â”œâ”€â”€ ExerciseController.java
    â”œâ”€â”€ SleepController.java
    â”œâ”€â”€ DietController.java
    â”œâ”€â”€ MentalHealthController.java
    â””â”€â”€ AnalysisController.java
```

### å‰ç«¯ï¼ˆ7ä¸ªï¼‰
```
frontend/src/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ health.js (æ›´æ–°)
â”‚   â””â”€â”€ analysis.js (æ–°å¢)
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ GlucoseRecord.vue
â”‚   â”œâ”€â”€ ExerciseRecord.vue
â”‚   â”œâ”€â”€ SleepRecord.vue
â”‚   â”œâ”€â”€ DietRecord.vue
â”‚   â”œâ”€â”€ MentalHealthRecord.vue
â”‚   â””â”€â”€ Dashboard.vue
â””â”€â”€ router/
    â””â”€â”€ index.js (æ›´æ–°)
```

---

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

ç¬¬å…­å‘¨å°†å®ç°ï¼š
1. æ•°æ®åˆ†æä¸å›¾è¡¨å±•ç¤º
2. å¤šç§å›¾è¡¨ç±»å‹ï¼ˆæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ï¼‰
3. EChartsé›†æˆ
4. æ•°æ®å¯¼å‡ºåŠŸèƒ½

ç¬¬ä¸ƒå‘¨å°†å®ç°ï¼š
1. æé†’ä¸å‘Šè­¦ç³»ç»Ÿ
2. é€šçŸ¥ä¸­å¿ƒ
3. å¥åº·å»ºè®®ç”Ÿæˆ

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“æ›´æ–°** - éœ€è¦åˆ›å»ºå¯¹åº”çš„æ•°æ®åº“è¡¨ï¼ˆblood_glucose_recordsç­‰ï¼‰ï¼Œå­—ç¬¦é›†utf8mb4
2. **æ—¥æœŸå¤„ç†** - å‰ç«¯ä½¿ç”¨YYYY-MM-DDæ ¼å¼ï¼Œåç«¯ä½¿ç”¨@DateTimeFormatæ³¨è§£è§£æ
3. **æ•°æ®é‡** - å½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œéœ€è¦è€ƒè™‘æ·»åŠ ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
4. **å®æ—¶æ›´æ–°** - åˆ†ææ¥å£ä¼šå®æ—¶è®¡ç®—ï¼Œç”Ÿäº§ç¯å¢ƒå¯è€ƒè™‘ç¼“å­˜ä¼˜åŒ–

